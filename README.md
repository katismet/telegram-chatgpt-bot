# Telegram-бот с OpenAI ChatGPT

Этот проект реализует Telegram-бота на библиотеке PyTelegramBotAPI, который работает как персональный помощник-секретарь с интеграцией OpenAI ChatGPT.

## Функциональность

- Принимает текстовые сообщения от пользователя
- Отправляет их в OpenAI ChatGPT через API
- Добавляет системное сообщение для задания роли бота
- Получает ответ от ChatGPT и отправляет пользователю
- Обрабатывает только текстовые сообщения
- Не хранит историю диалога

## Установка и настройка

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корневой папке проекта или установите переменные окружения в системе:

```bash
# Telegram Bot Token (получите у @BotFather)
TELEGRAM_TOKEN=your_telegram_bot_token_here

# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. Получение токенов

#### Telegram Bot Token:
1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

#### OpenAI API Key:
1. Зарегистрируйтесь на [OpenAI](https://platform.openai.com/)
2. Перейдите в раздел API Keys
3. Создайте новый API ключ
4. Скопируйте ключ

## Запуск бота

### Основная версия (переменные окружения в системе)
```bash
python chatbot.py
```

### Версия с поддержкой .env файла
```bash
python chatbot_with_env.py
```

## Тестирование

Перед запуском бота рекомендуется протестировать подключение к OpenAI:

```bash
python test_openai.py
```

Этот скрипт проверит:
- Наличие API ключа OpenAI
- Подключение к API
- Корректность ответов

## Использование

1. Найдите вашего бота в Telegram по имени
2. Отправьте команду `/start` для начала работы
3. Отправляйте любые текстовые сообщения
4. Бот будет отвечать как ваш персональный помощник

## Доступные команды

- `/start` - Начать работу с ботом
- `/help` - Показать справку

## Структура проекта

```
projekt recept/
├── chatbot.py              # Основной файл бота
├── chatbot_with_env.py     # Версия бота с поддержкой .env файлов
├── test_openai.py          # Скрипт для тестирования OpenAI подключения
├── requirements.txt        # Зависимости проекта
├── README.md              # Документация
├── .env.example           # Пример переменных окружения
├── bot.py                 # Существующий бот для рецептов
└── config.py              # Конфигурация существующего бота
```

## Особенности реализации

- Использует современную библиотеку `python-telegram-bot` версии 20.7
- Интеграция с OpenAI API через прокси `api.proxyapi.ru`
- Асинхронная обработка сообщений
- Обработка ошибок и логирование
- Системное сообщение для задания роли: "Ты вежливый и профессиональный личный помощник, работающий в Telegram."

## Безопасность

- Все токены хранятся в переменных окружения
- Нет хардкода секретных данных
- Обработка ошибок API запросов

## Требования

- Python 3.7+
- Доступ к интернету
- Валидные токены Telegram и OpenAI
